define([],function(){
	return [function(require,module,exports){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var History=function(){function History(limit,context){if(limit===undefined)limit=100;_classCallCheck(this,History);this.stackID=1;this.undoStack=[];this.redoStack=[];this.limit=limit;this.context=context}_createClass(History,[{key:"add",value:function add(item){app.trigger("context-pre-change",this.context);this.stackID++;this.undoStack.push(item);this.redoStack=[];if(this.undoStack.length>this.limit){this.undoStack.shift()}app.trigger("history-event","add",item.name,this.context);app.trigger("context-changed",this.context)}},{key:"empty",value:function empty(){this.redoStack=[];this.undoStack=[]}},{key:"hasUndo",value:function hasUndo(){return!!this.undoStack.length}},{key:"hasRedo",value:function hasRedo(){return!!this.redoStack.length}},{key:"undoName",value:function undoName(){if(this.hasUndo()){return'Undo "'+this.undoStack[this.undoStack.length-1].name+'"'}return"Undo"}},{key:"redoName",value:function redoName(){if(this.hasRedo()){return'Redo "'+this.redoStack[this.redoStack.length-1].name+'"'}return"Redo"}},{key:"undo",value:function undo(){app.trigger("context-pre-change",this.context);var item=this.undoStack.pop();if(!item)return false;this.stackID--;item.undo();this.redoStack.push(item);if(this.redoStack.length>this.limit){this.redoStack.shift()}app.trigger("history-event","undo",item.name,this.context);app.trigger("context-changed",this.context);return true}},{key:"redo",value:function redo(){app.trigger("context-pre-change",this.context);var item=this.redoStack.pop();if(!item)return false;this.stackID++;item.redo();this.undoStack.push(item);if(this.undoStack.length>this.limit){this.undoStack.shift()}app.trigger("history-event","redo",item.name,this.context);app.trigger("context-changed",this.context);return true}}]);return History}();module.exports=History},{}]
});