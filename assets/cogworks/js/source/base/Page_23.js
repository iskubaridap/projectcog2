define([],function(){
	return [function(require,module,exports){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _get=function get(_x3,_x4,_x5){var _again=true;_function:while(_again){var object=_x3,property=_x4,receiver=_x5;_again=false;if(object===null)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined}else{_x3=parent;_x4=property;_x5=receiver;_again=true;desc=parent=undefined;continue _function}}else if("value"in desc){return desc.value}else{var getter=desc.get;if(getter===undefined){return undefined}return getter.call(receiver)}}};function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var _findInTree=require("../helpers/findInTree");var _findInTreeCallback=require("../helpers/findInTreeCallback");var multipleTreeSelection=require("../helpers/multipleTreeSelection");var canParentTakeChildren=require("../helpers/canParentTakeChildren");var componentTreeToArray=require("../helpers/componentTreeToArray");var getHTMLForNode=require("../helpers/getHTMLForNode");var disableAttribute=require("../helpers/disableAttribute");var escapeHTML=require("escape-html");var MetaTag=require("./MetaTag");var Resource=require("../resources/Resource");var HTML=require("../components/base/HTML");var Body=require("../components/base/Body");var Page=function(_Resource){_inherits(Page,_Resource);_createClass(Page,null,[{key:"isNameValid",value:function isNameValid(name){return Resource.isNameValid(name)&&/\S+\.html$/.test(name)}}]);function Page(name){_classCallCheck(this,Page);_get(Object.getPrototypeOf(Page.prototype),"constructor",this).call(this,name);this.highlightedComponent=null;this.hoveredComponent=null;this.highlightedElement=null;this.highlightedSelector=null;this.domToComponent=new WeakMap;this._selection=null;this.html=null;this.context=null;this.extension="html";this.bars=[];this.meta=[];this.activeModal=null}_createClass(Page,[{key:"initialize",value:function initialize(){var html=new HTML;html.initialize();var body=new Body;body.initialize();html.insertLast(body);this.setHTML(html)}},{key:"setHTML",value:function setHTML(html){html.setPage(this);this.html=html}},{key:"isActive",value:function isActive(){return app.context&&app.context.isActive()&&app.context.page==this}},{key:"restoreComponentTree",value:function restoreComponentTree(tree,parent){var instance=new(this.context.framework.getComponent(tree["class"]));if(instance instanceof HTML){instance.setPage(this)}if(parent){instance.parent=parent}instance.unserialize(tree);return instance}},{key:"matchesPath",value:function matchesPath(){var path=arguments.length<=0||arguments[0]===undefined?"":arguments[0];var currentPath=this.context.pages.getRelativePathForItem(this).toLowerCase().trim();var checkedPath=path.toLowerCase().trim().replace(/^\.?\//,"").replace(/#.*$/,"");if(currentPath=="index.html"&&checkedPath==""){return true}return currentPath==checkedPath}},{key:"buildClipboardRepresentation",value:function buildClipboardRepresentation(component){var html=getHTMLForNode(component.element[0],component.page());var copyID=component.context().setCopyOrigin(component);var escaped=escapeHTML(JSON.stringify(component.clone().serialize()));var framework=this.context.framework.version;var doc='<html>\n\t\t\t<head>\n\t\t\t\t<title></title>\n\t\t\t\t<meta http-equiv="content-type" content="text/html; charset=utf-8">\n\t\t\t\t<meta name="generator" content="Cogworks">\n\t\t\t</head>\n\t\t\t<body data-linked="'+copyID+'" data-json="'+escaped+'" data-framework="'+framework+'">'+html+"</body>\n\t\t\t</html>";return{text:html,html:doc}}},{key:"parseClipboardRepresentation",value:function parseClipboardRepresentation(html){var parser=new DOMParser;var doc=parser.parseFromString(html,"text/html");var json=doc.body.dataset.json;var link=doc.body.dataset.linked;var framework=doc.body.dataset.framework;if(!json)return null;if(framework!=this.context.framework.version){return null}var origin=null,tree=null;try{var tree=this.restoreComponentTree(JSON.parse(json));return{linkID:link,component:tree}}catch(e){console.error(e);return null}}},{key:"findLinkedComponents",value:function findLinkedComponents(){return this.findInTreeCallback(function(c){return c.linkID},this.html.body)}},{key:"updateLinkedComponents",value:function updateLinkedComponents(){this.findLinkedComponents().forEach(function(c){if(c.exists()){c.update()}})}},{key:"hasMainNavbar",value:function hasMainNavbar(){return!!this.getMainNavbar()}},{key:"getMainNavbar",value:function getMainNavbar(){var NavBar=this.context.framework.getComponent("NavBar");var template=app.templateToContext.get(this.context.settings.theme.id);return this.findInTreeCallback(function(bar){return bar instanceof NavBar&&bar.linkID===template.mainNavbarID},this.html.body)[0]}},{key:"emptyMainNavbar",value:function emptyMainNavbar(){var navbar=this.getMainNavbar();if(!navbar)return;var Nav=this.context.framework.getComponent("Nav");this.findInTreeCallback(function(nav){return nav instanceof Nav},navbar).forEach(function(nav){nav.empty()})}},{key:"addPagesToNavigationOp",value:function addPagesToNavigationOp(){var pages=arguments.length<=0||arguments[0]===undefined?[]:arguments[0];var navbar=this.getMainNavbar();if(!navbar)return;var NavItem=this.context.framework.getComponent("NavItem");var Nav=this.context.framework.getComponent("Nav");var items=[];var nav=navbar.findChildrenOfType(Nav)[0];if(nav){var index=nav.children?nav.children.length:0;var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=pages[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var page=_step.value;var n=new NavItem;n.initialize(page.properties.title||page.getNameWithoutExtension("html"),this.context.pages.getRelativePathForItem(page));items.push({index:index,component:n});index++}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator["return"]){_iterator["return"]()}}finally{if(_didIteratorError){throw _iteratorError}}}}return{do:function _do(){navbar.addItemsToNavigation(items)},undo:function undo(){items.reverse();navbar.removeItemsFromNavigation(items);items.reverse()}}}},{key:"replaceTemplatePlaceholders",value:function replaceTemplatePlaceholders(placeholders){this.html.body.replaceTemplatePlaceholders(placeholders)}},{key:"getSelection",value:function getSelection(){if(!this._selection){this._selection=multipleTreeSelection(this.html,{type:"component"})}return this._selection}},{key:"clearSelection",value:function clearSelection(){var selection=this.getSelection();var components=selection.getSelectedItems();selection.clear();if(components.length){components.forEach(function(o){return o.onUnselect()});app.trigger("component-unselected",components)}}},{key:"isSelected",value:function isSelected(component){return this.getSelection().isItemSelected(component)}},{key:"getSelectionCount",value:function getSelectionCount(){return this.getSelection().getSelectionCount()}},{key:"hasSelection",value:function hasSelection(){return this.getSelection().getSelectionCount()>0}},{key:"isSingleComponentSelected",value:function isSingleComponentSelected(){return this.getSelection().getSelectionCount()==1}},{key:"areMultipleComponentsSelected",value:function areMultipleComponentsSelected(){return this.getSelection().getSelectionCount()>1}},{key:"getFirstSelectedComponent",value:function getFirstSelectedComponent(){if(this.isSingleComponentSelected()){return this.getSelectedComponents()[0]}return this.getSelection().hasSelection()?this.getFlatSelectedComponentsInPageOrder()[0]:null}},{key:"getSelectedComponents",value:function getSelectedComponents(){return this.getSelection().getSelectedItems()}},{key:"getFlatSelectedComponents",value:function getFlatSelectedComponents(){return this.getSelection().getFlatSelection()}},{key:"getFlatSelectedComponentsInPageOrder",value:function getFlatSelectedComponentsInPageOrder(){var topLevelItems=this.getFlatSelectedComponents();return topLevelItems.sort(function(a,b){return a.y!=b.y?a.y-b.y:a.x-b.x})}},{key:"getFlatSelectedComponentsInTreeOrder",value:function getFlatSelectedComponentsInTreeOrder(){var selection=this.getSelection();var items=this.getFlatSelectedComponents();var distances=selection.calcDistance(this.html);return items.sort(function(a,b){return distances.get(a)-distances.get(b)})}},{key:"checkSelectionFlag",value:function checkSelectionFlag(flag){var selected=this.getFlatSelectedComponents();var _iteratorNormalCompletion2=true;var _didIteratorError2=false;var _iteratorError2=undefined;try{for(var _iterator2=selected[Symbol.iterator](),_step2;!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=true){var component=_step2.value;if(!component.flags[flag]){return false}}}catch(err){_didIteratorError2=true;_iteratorError2=err}finally{try{if(!_iteratorNormalCompletion2&&_iterator2["return"]){_iterator2["return"]()}}finally{if(_didIteratorError2){throw _iteratorError2}}}return true}},{key:"canSelectionBeDuplicated",value:function canSelectionBeDuplicated(){return this.checkSelectionFlag("canBeDuplicated")}},{key:"canSelectionBeDeleted",value:function canSelectionBeDeleted(){return this.checkSelectionFlag("canBeDeleted")}},{key:"canSelectionBeMoved",value:function canSelectionBeMoved(){
return this.checkSelectionFlag("canBeMoved")}},{key:"deleteSelectionAction",value:function deleteSelectionAction(){var that=this;var selected=this.getFlatSelectedComponents();if(!selected.length){return}var ops=selected.map(function(c){return c.deleteOp()});var opsReversed=[];ops.forEach(function(op){return opsReversed.unshift(op)});ops.forEach(function(op){return op["do"]()});this.update();app.context.history.add({name:"Delete Component"+(selected.length!=1?"s":""),undo:function undo(){opsReversed.forEach(function(op){return op.undo()});that.update()},redo:function redo(){ops.forEach(function(op){return op["do"]()});that.update()}})}},{key:"duplicateSelectionAction",value:function duplicateSelectionAction(){var that=this;var selected=this.getFlatSelectedComponentsInTreeOrder();if(!selected.length){return}var selection=this.getSelection();var parentToChildrenMap=new Map;var _iteratorNormalCompletion3=true;var _didIteratorError3=false;var _iteratorError3=undefined;try{for(var _iterator3=selected[Symbol.iterator](),_step3;!(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done);_iteratorNormalCompletion3=true){var component=_step3.value;if(parentToChildrenMap.has(component.parent)){parentToChildrenMap.get(component.parent).push(component)}else{parentToChildrenMap.set(component.parent,[component])}}}catch(err){_didIteratorError3=true;_iteratorError3=err}finally{try{if(!_iteratorNormalCompletion3&&_iterator3["return"]){_iterator3["return"]()}}finally{if(_didIteratorError3){throw _iteratorError3}}}var ops=[];var _iteratorNormalCompletion4=true;var _didIteratorError4=false;var _iteratorError4=undefined;try{for(var _iterator4=parentToChildrenMap.keys()[Symbol.iterator](),_step4;!(_iteratorNormalCompletion4=(_step4=_iterator4.next()).done);_iteratorNormalCompletion4=true){var parent=_step4.value;var components=parentToChildrenMap.get(parent);var lastItem=components[components.length-1];var startIndex=parent.childIndex(lastItem)+1;for(var i=0;i<components.length;i++){ops.push(components[i].duplicateOp(parent,startIndex+i))}}}catch(err){_didIteratorError4=true;_iteratorError4=err}finally{try{if(!_iteratorNormalCompletion4&&_iterator4["return"]){_iterator4["return"]()}}finally{if(_didIteratorError4){throw _iteratorError4}}}ops.forEach(function(op){return op["do"]()});this.update();app.context.history.add({name:"Duplicate Component"+(selected.length!=1?"s":""),undo:function undo(){ops.forEach(function(op){return op.undo()});that.update()},redo:function redo(){ops.forEach(function(op){return op["do"]()});that.update()}})}},{key:"moveSelectionOp",value:function moveSelectionOp(){var selected=this.getFlatSelectedComponentsInTreeOrder().reverse();var ops=selected.map(function(s){return s.moveOp()});var opsReversed=ops.slice().reverse();return{do:function _do(insertAction){insertAction();ops.forEach(function(op){return op["do"]()})},undo:function undo(){opsReversed.forEach(function(op){return op.undo()})}}}},{key:"hasFocusedComponent",value:function hasFocusedComponent(){return this.isSingleComponentSelected()}},{key:"getFocusedComponent",value:function getFocusedComponent(){return this.hasFocusedComponent()?this.getSelection().getSelectedItems()[0]:null}},{key:"hasFocusedNode",value:function hasFocusedNode(){return this.isSingleComponentSelected()}},{key:"getFocusedNode",value:function getFocusedNode(){return this.isSingleComponentSelected()?this.getSelectedComponents()[0].getFocusedNode():null}},{key:"getSelectionActions",value:function getSelectionActions(){var selected=this.getFlatSelectedComponents();if(selected.length<1){return[]}var actions=[];if(this.canSelectionBeMoved()){actions.push({id:"move",label:"Move",icon:"open_with"})}if(this.canSelectionBeDuplicated()){actions.push({label:"Duplicate",icon:"content_copy",action:this.duplicateSelectionAction.bind(this)})}if(this.canSelectionBeDeleted()){actions.push({label:"Delete",icon:"delete",action:this.deleteSelectionAction.bind(this)})}return actions}},{key:"showSelectionContextMenu",value:function showSelectionContextMenu(){var options=[];if(this.canSelectionBeDuplicated()){options.push({name:"Copy To",options:this.getCopyToTargets(this.getFlatSelectedComponentsInPageOrder())})}if(this.canSelectionBeDuplicated()){options.push({name:"Duplicate",action:this.duplicateSelectionAction.bind(this)})}if(this.canSelectionBeDeleted()){options.push({name:"Delete",action:this.deleteSelectionAction.bind(this)})}if(options.length){options.unshift({name:"Multi Selection",type:"heading"})}var pos=app.mousePosition;app.contextMenu.show(pos.x,pos.y,options)}},{key:"getCopyToTargets",value:function getCopyToTargets(components){if(!Array.isArray(components)){components=[components]}var _iteratorNormalCompletion5=true;var _didIteratorError5=false;var _iteratorError5=undefined;try{for(var _iterator5=components[Symbol.iterator](),_step5;!(_iteratorNormalCompletion5=(_step5=_iterator5.next()).done);_iteratorNormalCompletion5=true){var component=_step5.value;if(!canParentTakeChildren(this.html.body,component)){return[]}}}catch(err){_didIteratorError5=true;_iteratorError5=err}finally{try{if(!_iteratorNormalCompletion5&&_iterator5["return"]){_iterator5["return"]()}}finally{if(_didIteratorError5){throw _iteratorError5}}}var options=[];var otherPages=[];var _iteratorNormalCompletion6=true;var _didIteratorError6=false;var _iteratorError6=undefined;try{for(var _iterator6=app.context.pages.getAll()[Symbol.iterator](),_step6;!(_iteratorNormalCompletion6=(_step6=_iterator6.next()).done);_iteratorNormalCompletion6=true){var page=_step6.value;if(page==this)continue;options.push({name:"/"+app.context.pages.getRelativePathForItem(page),action:pageClick.bind(this,page)});otherPages.push(page)}}catch(err){_didIteratorError6=true;_iteratorError6=err}finally{try{if(!_iteratorNormalCompletion6&&_iterator6["return"]){_iterator6["return"]()}}finally{if(_didIteratorError6){throw _iteratorError6}}}options.push({name:"New Page",action:function action(){var page=app.getPanel("design").createNewPage();pageClick(page)}});if(otherPages.length>=2){options.push({name:"Multiple..",action:function action(){app.copyToMultipleDialog.open({pages:otherPages,onSave:function onSave(pages,linked){var ops=[];var _iteratorNormalCompletion7=true;var _didIteratorError7=false;var _iteratorError7=undefined;try{for(var _iterator7=pages[Symbol.iterator](),_step7;!(_iteratorNormalCompletion7=(_step7=_iterator7.next()).done);_iteratorNormalCompletion7=true){var page=_step7.value;var _iteratorNormalCompletion11=true;var _didIteratorError11=false;var _iteratorError11=undefined;try{for(var _iterator11=components[Symbol.iterator](),_step11;!(_iteratorNormalCompletion11=(_step11=_iterator11.next()).done);_iteratorNormalCompletion11=true){var component=_step11.value;var copy=component.clone().cleanup();var cb=null;if(linked){cb=function(comp){comp.linkTo(this)}.bind(component)}ops.push(page.html.body.insertLastOp(copy,cb))}}catch(err){_didIteratorError11=true;_iteratorError11=err}finally{try{if(!_iteratorNormalCompletion11&&_iterator11["return"]){_iterator11["return"]()}}finally{if(_didIteratorError11){throw _iteratorError11}}}}}catch(err){_didIteratorError7=true;_iteratorError7=err}finally{try{if(!_iteratorNormalCompletion7&&_iterator7["return"]){_iterator7["return"]()}}finally{if(_didIteratorError7){throw _iteratorError7}}}ops.forEach(function(op){return op["do"]()});var _iteratorNormalCompletion8=true;var _didIteratorError8=false;var _iteratorError8=undefined;try{for(var _iterator8=pages[Symbol.iterator](),_step8;!(_iteratorNormalCompletion8=(_step8=_iterator8.next()).done);_iteratorNormalCompletion8=true){var page=_step8.value;page.html.body.update()}}catch(err){_didIteratorError8=true;_iteratorError8=err}finally{try{if(!_iteratorNormalCompletion8&&_iterator8["return"]){_iterator8["return"]()}}finally{if(_didIteratorError8){throw _iteratorError8}}}app.context.history.add({name:"Copy Component",undo:function undo(){ops.forEach(function(op){return op.undo()});var _iteratorNormalCompletion9=true;var _didIteratorError9=false;var _iteratorError9=undefined;try{for(var _iterator9=pages[Symbol.iterator](),_step9;!(_iteratorNormalCompletion9=(_step9=_iterator9.next()).done);_iteratorNormalCompletion9=true){var page=_step9.value;page.html.body.update()}}catch(err){_didIteratorError9=true;_iteratorError9=err}finally{try{if(!_iteratorNormalCompletion9&&_iterator9["return"]){_iterator9["return"]()}}finally{if(_didIteratorError9){throw _iteratorError9}}}},redo:function redo(){ops.forEach(function(op){return op["do"]()});var _iteratorNormalCompletion10=true;var _didIteratorError10=false;var _iteratorError10=undefined;try{for(var _iterator10=pages[Symbol.iterator](),_step10;!(_iteratorNormalCompletion10=(_step10=_iterator10.next()).done);_iteratorNormalCompletion10=true){var page=_step10.value;page.html.body.update()}}catch(err){_didIteratorError10=true;_iteratorError10=err}finally{try{if(!_iteratorNormalCompletion10&&_iterator10["return"]){_iterator10["return"]()}}finally{if(_didIteratorError10){throw _iteratorError10}}}}})}})}})}function pageClick(page){var body=page.html.body;var clones=[];var _iteratorNormalCompletion12=true;var _didIteratorError12=false;var _iteratorError12=undefined;try{for(var _iterator12=components[Symbol.iterator](),_step12;!(_iteratorNormalCompletion12=(_step12=_iterator12.next()).done);_iteratorNormalCompletion12=true){var component=_step12.value;var clone=component.clone();if(canParentTakeChildren(body,clone)){page.context.scanTreeForLinkedComponents(clone);clones.push(clone)}}}catch(err){_didIteratorError12=true;_iteratorError12=err}finally{try{if(!_iteratorNormalCompletion12&&_iterator12["return"]){_iterator12["return"]()}}finally{if(_didIteratorError12){throw _iteratorError12}}}clones.forEach(function(clone){return body.insertLast(clone)});body.update();app.context.history.add({name:"Insert Component"+(clones.length!=1?"s":""),undo:function undo(){clones.forEach(function(clone){return clone.remove()});body.update()},redo:function redo(){clones.forEach(function(clone){return body.insertLast(clone)});body.update()}})}return options}},{key:"getSelectionRect",value:function getSelectionRect(){var selectedComponents=this.getSelectedComponents();var minX=app.context.canvasDimensions.width,minY=app.context.canvasDimensions.height,maxX=0,maxY=0;var _iteratorNormalCompletion13=true;var _didIteratorError13=false;var _iteratorError13=undefined;try{for(var _iterator13=selectedComponents[Symbol.iterator](),_step13;!(_iteratorNormalCompletion13=(_step13=_iterator13.next()).done);_iteratorNormalCompletion13=true){var component=_step13.value;if(!component.isVisible())continue;if(component.x<minX){minX=component.x}if(component.y<minY){minY=component.y}if(component.x+component.width>maxX){maxX=component.x+component.width}if(component.y+component.height>maxY){maxY=component.y+component.height}}}catch(err){_didIteratorError13=true;_iteratorError13=err}finally{try{if(!_iteratorNormalCompletion13&&_iterator13["return"]){_iterator13["return"]()}}finally{if(_didIteratorError13){throw _iteratorError13}}}minX=Math.max(minX,0);minY=Math.max(minY,0);var width=Math.min(maxX-minX,app.context.canvasDimensions.width-minX);var height=Math.min(maxY-minY,app.context.canvasDimensions.height-minY);return{top:minY,left:minX,width:width,height:height}}},{key:"exists",value:function exists(){return this.context&&this.context.exists()&&this.context.pages.contains(this)}},{key:"getDepth",value:function getDepth(){if(!this.context)return null;return this.context.pages.getItemDepth(this)}},{key:"getMergedMeta",value:function getMergedMeta(){var merged=this.meta.slice();outer:for(var i=0;i<this.context.settings.meta.length;i++){var contextMeta=this.context.settings.meta[i];for(var j=0;j<merged.length;j++){var pageMeta=merged[j];if(contextMeta.similarTo(pageMeta)){continue outer}}merged.unshift(contextMeta)}return merged}},{key:"findComponentForElement",value:function findComponentForElement(element){while(element){if(this.domToComponent.has(element)){return this.domToComponent.get(element)}element=element.parentNode}return null}},{key:"findInTreeCallback",value:function findInTreeCallback(cb){return _findInTreeCallback(cb,this.html.body)}},{key:"findInTree",value:function findInTree(what){return _findInTree(what,this.html.body)}},{key:"walkTree",value:function walkTree(tree,cb){componentTreeToArray(tree).forEach(cb)}},{key:"findUsedImages",value:function findUsedImages(){return this.html.findUsedImages()}},{key:"setContext",value:function setContext(ctx){this.context=ctx}},{key:"getTitle",value:function getTitle(){return(this.properties.title||this.context.name).trim()}},{key:"getDescription",value:function getDescription(){return(this.properties.description||"").trim()}},{key:"getInjectedHeadContent",value:function getInjectedHeadContent(){var content=this.context.settings.headContent||"";if(this.properties.headContent){if(this.properties.headContentOrder=="after-global"){content+=this.properties.headContent}if(this.properties.headContentOrder=="before-global"){content=this.properties.headContent+content}if(this.properties.headContentOrder=="replace-global"){content=this.properties.headContent}}return content}},{key:"cleanAfterGenerateHTML",value:function cleanAfterGenerateHTML(){disableAttribute("autoplay",this.html.element[0]);disableAttribute("loop",this.html.element[0])}},{key:"update",value:function update(){this.html.update()}},{key:"clone",value:function clone(){var clone=new this.constructor(this.name);clone.unserialize(this.serialize(),this.context);return clone}},{key:"serialize",value:function serialize(){var obj=_get(Object.getPrototypeOf(Page.prototype),"serialize",this).call(this);obj.html=this.html.serialize();obj.meta=this.meta.map(function(m){return m.serialize()});return obj}},{key:"unserialize",value:function unserialize(obj,context){_get(Object.getPrototypeOf(Page.prototype),"unserialize",this).call(this,obj);if(context){this.setContext(context)}this.meta=obj.meta.map(function(m){return new MetaTag(m.type,m.key,m.content)});this.setHTML(this.restoreComponentTree(obj.html))}}]);return Page}(Resource);module.exports=Page},{"../components/base/Body":34,"../components/base/HTML":50,"../helpers/canParentTakeChildren":547,"../helpers/componentTreeToArray":551,"../helpers/disableAttribute":556,"../helpers/findInTree":564,"../helpers/findInTreeCallback":565,"../helpers/getHTMLForNode":573,"../helpers/multipleTreeSelection":589,"../resources/Resource":1256,"./MetaTag":21,"escape-html":1021}]
});