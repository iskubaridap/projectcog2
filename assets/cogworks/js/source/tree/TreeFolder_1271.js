define([],function(){
	return [function(require,module,exports){"use strict";var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _get=function get(_x11,_x12,_x13){var _again=true;_function:while(_again){var object=_x11,property=_x12,receiver=_x13;_again=false;if(object===null)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined}else{_x11=parent;_x12=property;_x13=receiver;_again=true;desc=parent=undefined;continue _function}}else if("value"in desc){return desc.value}else{var getter=desc.get;if(getter===undefined){return undefined}return getter.call(receiver)}}};function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}else{return Array.from(arr)}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var TreeItem=require("./TreeItem");var TreeWrapper=require("./TreeWrapper");var Resource=require("../resources/Resource");var generateUniqueID=require("../helpers/generateUniqueID");var validFilename=require("valid-filename");var TreeFolder=function(_TreeItem){_inherits(TreeFolder,_TreeItem);function TreeFolder(){_classCallCheck(this,TreeFolder);_get(Object.getPrototypeOf(TreeFolder.prototype),"constructor",this).call(this);this.name="";this.children=[];this.expanded=false}_createClass(TreeFolder,[{key:"initialize",value:function initialize(){var _this=this;var name=arguments.length<=0||arguments[0]===undefined?"":arguments[0];var children=arguments.length<=1||arguments[1]===undefined?[]:arguments[1];this.name=name;this.children=children.map(function(c){if(c instanceof TreeWrapper||c instanceof TreeFolder){return c}var w=_this.createWrapper();w.set(c);return w})}},{key:"getName",value:function getName(){return this.name}},{key:"createFolder",value:function createFolder(){return this.parent.createFolder()}},{key:"createWrapper",value:function createWrapper(){return this.parent.createWrapper()}},{key:"addOp",value:function addOp(){var _this2=this;var items=arguments.length<=0||arguments[0]===undefined?[]:arguments[0];if(!Array.isArray(items)){items=[items]}var wrappedItems=items.map(function(item){if(item instanceof TreeFolder){return item}var wrapper=_this2.createWrapper();wrapper.set(item);return wrapper});var that=this;var oldParents=new Map;var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=wrappedItems[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var wrapper=_step.value;oldParents.set(wrapper,wrapper.parent)}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator["return"]){_iterator["return"]()}}finally{if(_didIteratorError){throw _iteratorError}}}return{do:function _do(){var _that$children;var _iteratorNormalCompletion2=true;var _didIteratorError2=false;var _iteratorError2=undefined;try{for(var _iterator2=wrappedItems[Symbol.iterator](),_step2;!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=true){var wrapper=_step2.value;wrapper.parent=that}}catch(err){_didIteratorError2=true;_iteratorError2=err}finally{try{if(!_iteratorNormalCompletion2&&_iterator2["return"]){_iterator2["return"]()}}finally{if(_didIteratorError2){throw _iteratorError2}}}(_that$children=that.children).push.apply(_that$children,_toConsumableArray(wrappedItems));that.sort()},undo:function undo(){var _iteratorNormalCompletion3=true;var _didIteratorError3=false;var _iteratorError3=undefined;try{for(var _iterator3=wrappedItems[Symbol.iterator](),_step3;!(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done);_iteratorNormalCompletion3=true){var wrapped=_step3.value;that.children.splice(that.children.indexOf(wrapped),1);wrapper.parent=oldParents.get(wrapper)}}catch(err){_didIteratorError3=true;_iteratorError3=err}finally{try{if(!_iteratorNormalCompletion3&&_iterator3["return"]){_iterator3["return"]()}}finally{if(_didIteratorError3){throw _iteratorError3}}}}}}},{key:"removeOp",value:function removeOp(){var _this3=this;var items=arguments.length<=0||arguments[0]===undefined?[]:arguments[0];if(!Array.isArray(items)){items=[items]}var wrappers=items.map(function(item){if(item instanceof TreeFolder||item instanceof TreeWrapper){return item}return _this3.findWrapperForItem(item)});var that=this;var oldParents=new Map;var _iteratorNormalCompletion4=true;var _didIteratorError4=false;var _iteratorError4=undefined;try{for(var _iterator4=wrappers[Symbol.iterator](),_step4;!(_iteratorNormalCompletion4=(_step4=_iterator4.next()).done);_iteratorNormalCompletion4=true){var wrap=_step4.value;oldParents.set(wrap,wrap.parent)}}catch(err){_didIteratorError4=true;_iteratorError4=err}finally{try{if(!_iteratorNormalCompletion4&&_iterator4["return"]){_iterator4["return"]()}}finally{if(_didIteratorError4){throw _iteratorError4}}}var indexes=[],index=-1;var indexToItem=new Map;var _iteratorNormalCompletion5=true;var _didIteratorError5=false;var _iteratorError5=undefined;try{for(var _iterator5=wrappers[Symbol.iterator](),_step5;!(_iteratorNormalCompletion5=(_step5=_iterator5.next()).done);_iteratorNormalCompletion5=true){var wrapper=_step5.value;index=this.children.indexOf(wrapper);indexes.push(index);indexToItem.set(index,wrapper)}}catch(err){_didIteratorError5=true;_iteratorError5=err}finally{try{if(!_iteratorNormalCompletion5&&_iterator5["return"]){_iterator5["return"]()}}finally{if(_didIteratorError5){throw _iteratorError5}}}indexes.sort();return{do:function _do(){var _iteratorNormalCompletion6=true;var _didIteratorError6=false;var _iteratorError6=undefined;try{for(var _iterator6=wrappers[Symbol.iterator](),_step6;!(_iteratorNormalCompletion6=(_step6=_iterator6.next()).done);_iteratorNormalCompletion6=true){var wrapper=_step6.value;that.children.splice(that.children.indexOf(wrapper),1);wrapper.parent=null}}catch(err){_didIteratorError6=true;_iteratorError6=err}finally{try{if(!_iteratorNormalCompletion6&&_iterator6["return"]){_iterator6["return"]()}}finally{if(_didIteratorError6){throw _iteratorError6}}}},undo:function undo(){var _iteratorNormalCompletion7=true;var _didIteratorError7=false;var _iteratorError7=undefined;try{for(var _iterator7=wrappers[Symbol.iterator](),_step7;!(_iteratorNormalCompletion7=(_step7=_iterator7.next()).done);_iteratorNormalCompletion7=true){var wrapper=_step7.value;wrapper.parent=oldParents.get(wrapper)}}catch(err){_didIteratorError7=true;_iteratorError7=err}finally{try{if(!_iteratorNormalCompletion7&&_iterator7["return"]){_iterator7["return"]()}}finally{if(_didIteratorError7){throw _iteratorError7}}}var _iteratorNormalCompletion8=true;var _didIteratorError8=false;var _iteratorError8=undefined;try{for(var _iterator8=indexes[Symbol.iterator](),_step8;!(_iteratorNormalCompletion8=(_step8=_iterator8.next()).done);_iteratorNormalCompletion8=true){var index=_step8.value;that.children.splice(index,0,indexToItem.get(index))}}catch(err){_didIteratorError8=true;_iteratorError8=err}finally{try{if(!_iteratorNormalCompletion8&&_iterator8["return"]){_iterator8["return"]()}}finally{if(_didIteratorError8){throw _iteratorError8}}}}}}},{key:"canItemBeRenamedTo",value:function canItemBeRenamedTo(item,newName){if(!Resource.isNameValid(newName)){return false}if(item.getName()==newName){return false}var entry=this.getEntry(newName);if(entry==item||entry instanceof TreeWrapper&&entry.item==item){return true}return!this.hasEntry(newName)}},{key:"renameOp",value:function renameOp(item,newName){var oldName=item.getName();var that=this;return{do:function _do(){item.name=newName;that.sort()},undo:function undo(){item.name=oldName;that.sort()}}}},{key:"ensureChildUniqueName",value:function ensureChildUniqueName(item){var entry;if(item instanceof TreeFolder){entry=item}else if(item instanceof TreeWrapper){entry=item;item=entry.item}else{entry=this.findWrapperForItem(item)}if(!entry)return;var _iteratorNormalCompletion9=true;var _didIteratorError9=false;var _iteratorError9=undefined;try{for(var _iterator9=this.children[Symbol.iterator](),_step9;!(_iteratorNormalCompletion9=(_step9=_iterator9.next()).done);_iteratorNormalCompletion9=true){var child=_step9.value;if(entry!=child&&entry.nameSameAs(child)){item.name=this.generateUniqueFreeName(item.getName().replace(/\-\d+$/,""));return}}}catch(err){_didIteratorError9=true;_iteratorError9=err}finally{try{if(!_iteratorNormalCompletion9&&_iterator9["return"]){_iterator9["return"]()}}finally{if(_didIteratorError9){throw _iteratorError9}}}}},{key:"generateUniqueFreeName",value:function generateUniqueFreeName(prefix){var extension=arguments.length<=1||arguments[1]===undefined?"":arguments[1];var additionalEntries=arguments.length<=2||arguments[2]===undefined?[]:arguments[2];if(extension){extension="."+extension}prefix=Resource.sanitizeName(prefix);if(!prefix.length){prefix=this.defaultPrefix}var name=prefix+extension;var that=this;if(this.hasEntry(name)||additionalEntries.indexOf(name)>-1){name=prefix+"-"+generateUniqueID(function exists(id){return that.hasEntry(prefix+"-"+id+extension)||additionalEntries.indexOf(prefix+"-"+id+extension)>-1})+extension}return name}},{key:"get",value:function get(name){name=name.toLowerCase();var _iteratorNormalCompletion10=true;var _didIteratorError10=false;var _iteratorError10=undefined;try{for(var _iterator10=this.children[Symbol.iterator](),_step10;!(_iteratorNormalCompletion10=(_step10=_iterator10.next()).done);_iteratorNormalCompletion10=true){var child=_step10.value;if(child instanceof TreeWrapper&&child.getName().toLowerCase()==name)return child.item}}catch(err){_didIteratorError10=true;_iteratorError10=err}finally{try{if(!_iteratorNormalCompletion10&&_iterator10["return"]){_iterator10["return"]()}}finally{if(_didIteratorError10){throw _iteratorError10}}}return null}},{key:"addEntry",value:function addEntry(){var _children;var items=arguments.length<=0||arguments[0]===undefined?[]:arguments[0];if(!Array.isArray(items)){items=[items]}var _iteratorNormalCompletion11=true;var _didIteratorError11=false;var _iteratorError11=undefined;try{for(var _iterator11=items[Symbol.iterator](),_step11;!(_iteratorNormalCompletion11=(_step11=_iterator11.next()).done);_iteratorNormalCompletion11=true){var item=_step11.value;item.parent=this}}catch(err){_didIteratorError11=true;_iteratorError11=err}finally{try{if(!_iteratorNormalCompletion11&&_iterator11["return"]){_iterator11["return"]()}}finally{if(_didIteratorError11){throw _iteratorError11}}}(_children=this.children).push.apply(_children,_toConsumableArray(items));this.sort()}},{key:"getEntry",value:function getEntry(name){name=name.toLowerCase();var _iteratorNormalCompletion12=true;var _didIteratorError12=false;var _iteratorError12=undefined;try{for(var _iterator12=this.children[Symbol.iterator](),_step12;!(_iteratorNormalCompletion12=(_step12=_iterator12.next()).done);_iteratorNormalCompletion12=true){var child=_step12.value;if(child.getName().toLowerCase()==name)return child}}catch(err){_didIteratorError12=true;_iteratorError12=err}finally{try{if(!_iteratorNormalCompletion12&&_iterator12["return"]){_iterator12["return"]()}}finally{if(_didIteratorError12){throw _iteratorError12}}}return null}},{key:"getFolder",value:function getFolder(name){name=name.toLowerCase();var _iteratorNormalCompletion13=true;var _didIteratorError13=false;var _iteratorError13=undefined;try{for(var _iterator13=this.children[Symbol.iterator](),_step13;!(_iteratorNormalCompletion13=(_step13=_iterator13.next()).done);_iteratorNormalCompletion13=true){var child=_step13.value;if(child instanceof TreeFolder&&child.getName().toLowerCase()==name)return child}}catch(err){_didIteratorError13=true;_iteratorError13=err}finally{try{if(!_iteratorNormalCompletion13&&_iterator13["return"]){_iterator13["return"]()}}finally{if(_didIteratorError13){throw _iteratorError13}}}return null}},{key:"getFolderForEntry",value:function getFolderForEntry(entry){if(this.hasItem(entry))return this;if(this.hasFolder(entry))return this;var _iteratorNormalCompletion14=true;var _didIteratorError14=false;var _iteratorError14=undefined;try{for(var _iterator14=this.children[Symbol.iterator](),_step14;!(_iteratorNormalCompletion14=(_step14=_iterator14.next()).done);_iteratorNormalCompletion14=true){var child=_step14.value;if(child instanceof TreeFolder){var result=child.getFolderForEntry(entry);if(result)return result}}}catch(err){_didIteratorError14=true;_iteratorError14=err}finally{try{if(!_iteratorNormalCompletion14&&_iterator14["return"]){_iterator14["return"]()}}finally{if(_didIteratorError14){throw _iteratorError14}}}return null}},{key:"has",value:function has(name){return this.get(name)!==null}},{key:"hasEntry",value:function hasEntry(name){return this.getEntry(name)!==null}},{key:"hasFolder",value:function hasFolder(folder){return this.children.indexOf(folder)>-1}},{key:"hasItem",value:function hasItem(item){return this.findWrapperForItem(item)!==null}},{key:"contains",value:function contains(item){if(this.hasItem(item)||this.hasFolder(item))return true;var _iteratorNormalCompletion15=true;var _didIteratorError15=false;var _iteratorError15=undefined;try{for(var _iterator15=this.children[Symbol.iterator](),_step15;!(_iteratorNormalCompletion15=(_step15=_iterator15.next()).done);_iteratorNormalCompletion15=true){var child=_step15.value;if(child instanceof TreeFolder&&child.contains(item)){return true}}}catch(err){_didIteratorError15=true;_iteratorError15=err}finally{try{if(!_iteratorNormalCompletion15&&_iterator15["return"]){_iterator15["return"]()}}finally{if(_didIteratorError15){throw _iteratorError15}}}return false}},{key:"containsInstanceOf",value:function containsInstanceOf(type){var found=false;this.loop(function(item){if(item instanceof type){found=true;return false}});return found}},{key:"findWrapperForItem",value:function findWrapperForItem(item){var _iteratorNormalCompletion16=true;var _didIteratorError16=false;var _iteratorError16=undefined;try{for(var _iterator16=this.children[Symbol.iterator](),_step16;!(_iteratorNormalCompletion16=(_step16=_iterator16.next()).done);_iteratorNormalCompletion16=true){var child=_step16.value;if(child instanceof TreeWrapper&&child.item==item)return child}}catch(err){_didIteratorError16=true;_iteratorError16=err}finally{try{if(!_iteratorNormalCompletion16&&_iterator16["return"]){_iterator16["return"]()}}finally{if(_didIteratorError16){throw _iteratorError16}}}return null}},{key:"findWrapperForItemRecursive",value:function findWrapperForItemRecursive(item){var result=null;var _iteratorNormalCompletion17=true;var _didIteratorError17=false;var _iteratorError17=undefined;try{for(var _iterator17=this.children[Symbol.iterator](),_step17;!(_iteratorNormalCompletion17=(_step17=_iterator17.next()).done);_iteratorNormalCompletion17=true){var child=_step17.value;if(child instanceof TreeWrapper&&child.item==item){return child}if(child instanceof TreeFolder){result=child.findWrapperForItemRecursive(item);if(result)return result}}}catch(err){_didIteratorError17=true;_iteratorError17=err}finally{try{if(!_iteratorNormalCompletion17&&_iterator17["return"]){_iterator17["return"]()}}finally{if(_didIteratorError17){throw _iteratorError17}}}return null}},{key:"findParentFolderForItem",value:function findParentFolderForItem(item){var wrapper=this.findWrapperForItemRecursive(item);if(!wrapper)return null;return wrapper.parent}},{key:"sort",value:function sort(){this.children.sort(function(a,b){return(b instanceof TreeFolder)-(a instanceof TreeFolder)||a.getName().toLowerCase().localeCompare(b.getName().toLowerCase())});var _iteratorNormalCompletion18=true;var _didIteratorError18=false;var _iteratorError18=undefined;try{for(var _iterator18=this.children[Symbol.iterator](),_step18;!(_iteratorNormalCompletion18=(_step18=_iterator18.next()).done);_iteratorNormalCompletion18=true){var child=_step18.value;if(child instanceof TreeFolder){child.sort()}}}catch(err){_didIteratorError18=true;_iteratorError18=err}finally{try{if(!_iteratorNormalCompletion18&&_iterator18["return"]){_iterator18["return"]()}}finally{if(_didIteratorError18){throw _iteratorError18}}}}},{key:"loop",value:function loop(cb){var result;var _iteratorNormalCompletion19=true;var _didIteratorError19=false;var _iteratorError19=undefined;try{for(var _iterator19=this.children[Symbol.iterator](),_step19;!(_iteratorNormalCompletion19=(_step19=_iterator19.next()).done);_iteratorNormalCompletion19=true){var child=_step19.value;if(child instanceof TreeFolder){result=child.loop(cb)}else if(child instanceof TreeWrapper){result=cb(child.item)}if(result===false)return false}}catch(err){_didIteratorError19=true;_iteratorError19=err}finally{try{if(!_iteratorNormalCompletion19&&_iterator19["return"]){_iterator19["return"]()}}finally{if(_didIteratorError19){throw _iteratorError19}}}return true}},{key:"getAll",value:function getAll(){var allChildren=[];var _iteratorNormalCompletion20=true;var _didIteratorError20=false;var _iteratorError20=undefined;try{for(var _iterator20=this.children[Symbol.iterator](),_step20;!(_iteratorNormalCompletion20=(_step20=_iterator20.next()).done);_iteratorNormalCompletion20=true){var child=_step20.value;if(child instanceof TreeFolder){allChildren.push.apply(allChildren,_toConsumableArray(child.getAll()))}else if(child instanceof TreeWrapper){allChildren.push(child.item)}}}catch(err){_didIteratorError20=true;_iteratorError20=err}finally{try{if(!_iteratorNormalCompletion20&&_iterator20["return"]){_iterator20["return"]()}}finally{if(_didIteratorError20){throw _iteratorError20}}}return allChildren}},{key:"getAllEntries",value:function getAllEntries(){var allChildren=[];var _iteratorNormalCompletion21=true;var _didIteratorError21=false;var _iteratorError21=undefined;try{for(var _iterator21=this.children[Symbol.iterator](),_step21;!(_iteratorNormalCompletion21=(_step21=_iterator21.next()).done);_iteratorNormalCompletion21=true){var child=_step21.value;allChildren.push(child);if(child instanceof TreeFolder){allChildren.push.apply(allChildren,_toConsumableArray(child.getAllEntries()))}}}catch(err){_didIteratorError21=true;_iteratorError21=err}finally{try{if(!_iteratorNormalCompletion21&&_iterator21["return"]){_iterator21["return"]()}}finally{if(_didIteratorError21){throw _iteratorError21}}}return allChildren}},{key:"getAllFolders",value:function getAllFolders(){return this.getAllEntries().filter(function(e){return e instanceof TreeFolder})}},{key:"getAllWrappers",value:function getAllWrappers(){return this.getAllEntries().filter(function(e){return e instanceof TreeWrapper})}},{key:"getAllItemPaths",value:function getAllItemPaths(){var _this4=this;return this.getAllWrappers().map(function(w){return w.getRelativePath(_this4)})}},{key:"getRelativeFolderPathForItem",value:function getRelativeFolderPathForItem(item){var folder=this.getFolderForEntry(item);if(!folder)return null;return folder.getRelativePath()}},{key:"isChildOf",value:function isChildOf(folder){if(this.parent==folder)return true;return this.parent.isChildOf(folder)}},{key:"filterTree",value:function filterTree(cb){var tree=new this.constructor(this.context);this.filterTreeWalk(tree,cb);return tree}},{key:"filterTreeWalk",value:function filterTreeWalk(tree,cb){var paths=arguments.length<=2||arguments[2]===undefined?[]:arguments[2];var _iteratorNormalCompletion22=true;var _didIteratorError22=false;var _iteratorError22=undefined;try{for(var _iterator22=this.children[Symbol.iterator](),_step22;!(_iteratorNormalCompletion22=(_step22=_iterator22.next()).done);_iteratorNormalCompletion22=true){var child=_step22.value;if(child instanceof TreeFolder){child.filterTreeWalk(tree,cb,paths.concat(child.name))}else if(child instanceof TreeWrapper&&cb(child.item)){var tip=tree;var _iteratorNormalCompletion23=true;var _didIteratorError23=false;var _iteratorError23=undefined;try{for(var _iterator23=paths[Symbol.iterator](),_step23;!(_iteratorNormalCompletion23=(_step23=_iterator23.next()).done);_iteratorNormalCompletion23=true){var path=_step23.value;if(!tip.getFolder(path)){var folder=new TreeFolder;folder.initialize(path);tip.addOp(folder)["do"]()}tip=tip.getFolder(path)}}catch(err){_didIteratorError23=true;_iteratorError23=err}finally{try{if(!_iteratorNormalCompletion23&&_iterator23["return"]){_iterator23["return"]()}}finally{if(_didIteratorError23){throw _iteratorError23}}}tip.addOp(child.item)["do"]()}}}catch(err){_didIteratorError22=true;_iteratorError22=err}finally{try{if(!_iteratorNormalCompletion22&&_iterator22["return"]){_iterator22["return"]()}}finally{if(_didIteratorError22){throw _iteratorError22}}}}},{key:"insertTreeWalk",value:function insertTreeWalk(tree){var options=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];var ops=[];var additionalItems=[];var _iteratorNormalCompletion24=true;var _didIteratorError24=false;var _iteratorError24=undefined;try{for(var _iterator24=tree.children[Symbol.iterator](),_step24;!(_iteratorNormalCompletion24=(_step24=_iterator24.next()).done);_iteratorNormalCompletion24=true){var child=_step24.value;if(child instanceof TreeFolder){var entry=this.getFolder(child.name);if(!entry){if(child.context){child.setContext(this.context)}ops.push(this.addOp(child))}else{ops.push.apply(ops,_toConsumableArray(entry.insertTreeWalk(child,options)))}}if(child instanceof TreeWrapper){var entries=this.get(child.getName())||additionalItems.filter(function(item){return item.name===child.getName()});if(!Array.isArray(entries)){entries=[entries]}var hasEntry=!!entries.length;if(hasEntry){if(options.ignoreDuplicates){continue}if(options.addDuplicates){var name=this.generateUniqueFreeName(child.item.getNameWithoutExtension(),child.item.extension||this.defaultExtension,additionalItems.map(function(item){return item.name}));child.item.setName(name)}if(options.replaceDuplicates){ops.push(this.removeOp(entries))}ops.push(this.addOp(child.item));additionalItems.push(child.item)}else{ops.push(this.addOp(child.item));additionalItems.push(child.item)}}}}catch(err){_didIteratorError24=true;_iteratorError24=err}finally{try{if(!_iteratorNormalCompletion24&&_iterator24["return"]){_iterator24["return"]()}}finally{if(_didIteratorError24){throw _iteratorError24}}}return ops}},{key:"insertTreeOp",value:function insertTreeOp(tree){var options=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];options=_extends({ignoreDuplicates:false,replaceDuplicates:false,addDuplicates:false},options);var ops=this.insertTreeWalk(tree,options);return{do:function _do(){ops.forEach(function(op){return op["do"]()})},undo:function undo(){ops.forEach(function(op){return op.undo()})}}}},{key:"serialize",value:function serialize(){return{name:this.name,expanded:this.expanded,children:this.children.map(function(c){return c.serialize()})}}},{key:"unserialize",value:function unserialize(obj){var _this5=this;this.name=obj.name;this.expanded=obj.expanded;this.children=obj.children.map(function(json){var item;if(json.children){item=_this5.createFolder()}else{item=_this5.createWrapper()}item.parent=_this5;item.unserialize(json);return item});this.sort()}},{key:"length",get:function get(){var len=0;var _iteratorNormalCompletion25=true;var _didIteratorError25=false;var _iteratorError25=undefined;try{for(var _iterator25=this.children[Symbol.iterator](),_step25;!(_iteratorNormalCompletion25=(_step25=_iterator25.next()).done);_iteratorNormalCompletion25=true){var child=_step25.value;if(child instanceof TreeWrapper){len++}else if(child instanceof TreeFolder){len+=child.length}}}catch(err){_didIteratorError25=true;_iteratorError25=err}finally{try{if(!_iteratorNormalCompletion25&&_iterator25["return"]){_iterator25["return"]()}}finally{if(_didIteratorError25){throw _iteratorError25}}}return len}}]);return TreeFolder}(TreeItem);module.exports=TreeFolder},{"../helpers/generateUniqueID":568,"../resources/Resource":1256,"./TreeItem":1273,"./TreeWrapper":1274,"valid-filename":1198}]
});