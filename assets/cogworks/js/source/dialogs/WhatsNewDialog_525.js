define([],function(){
	return [function(require,module,exports){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _get=function get(_x,_x2,_x3){var _again=true;_function:while(_again){var object=_x,property=_x2,receiver=_x3;_again=false;if(object===null)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined}else{_x=parent;_x2=property;_x3=receiver;_again=true;desc=parent=undefined;continue _function}}else if("value"in desc){return desc.value}else{var getter=desc.get;if(getter===undefined){return undefined}return getter.call(receiver)}}};function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}
subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var Dialog=require("./Dialog");var WhatsNewDialog=function(_Dialog){_inherits(WhatsNewDialog,_Dialog);function WhatsNewDialog(elem){_classCallCheck(this,WhatsNewDialog);_get(Object.getPrototypeOf(WhatsNewDialog.prototype),"constructor",this).call(this,elem);elem.on("click","li a",function(e){electron.openBrowserWindow(e.target.href)});this.index=0;this.prev=elem.find(".arrow.previous");this.next=elem.find(".arrow.next");this.prev.on("click",this.prevClick.bind(this));this.next.on("click",this.nextClick.bind(this));this.slideHolder=this.element.find(".slides");this.slideScroll=this.element.find(".slides .slide-scroll");elem.find(".button.ok").on("click",this.close.bind(this));elem.find(".button.all-releases").on("click",function(){electron.openBrowserWindow("https://cogworks.io/pages/releases")});doc.on("keydown",this.onDocKeydown.bind(this))}_createClass(WhatsNewDialog,[{key:"onDocKeydown",value:function onDocKeydown(e){if(!this.isVisible()){return}if(e.keyCode==37&&this.options.slides[this.index-1]){this.prevClick()}if(e.keyCode==39&&this.options.slides[this.index+1]){this.nextClick()}}},{key:"nextClick",value:function nextClick(){this.index++;this.updateView(true);this.element.removeClass("animate-next-arrow")}},{key:"prevClick",value:function prevClick(){this.index--;this.updateView(true);this.element.removeClass("animate-next-arrow")}},{key:"afterClose",value:function afterClose(){this.slideHolder[0].style.height=""}},{key:"open",value:function open(options){_get(Object.getPrototypeOf(WhatsNewDialog.prototype),"open",this).call(this,options);this.element.addClass("animate-next-arrow");this.slideScroll.empty();this.element.removeClass("animated");var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=options.slides[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var slide=_step.value;var slideElem=$('\n\t\t\t\t<div class="slide">\n\t\t\t\t\t<div class="slide-media"></div>\n\t\t\t\t\t<div class="slide-title"></div>\n\t\t\t\t\t<div class="slide-description"></div>\n\t\t\t\t</div>\n\t\t\t');if(slide.type=="intro"){slideElem.addClass("intro")}else if(slide.type=="changelog"){slideElem.addClass("changelog");slideElem.find(".slide-description").remove();var changelogContainer=$('<div class="slide-changelog-container">');changelogContainer.append(slideElem.find(".slide-title"));var _iteratorNormalCompletion2=true;var _didIteratorError2=false;var _iteratorError2=undefined;try{for(var _iterator2=slide.changes[Symbol.iterator](),_step2;!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=true){var group=_step2.value;var ul=$("<ul>");ul.html(group.changes.map(function(c){return"<li>"+c+"</li>"}));ul.addClass("slide-list");var header=$('\n\t\t\t\t\t\t<div class="slide-changelog-header">\n\t\t\t\t\t\t\t<span class="slide-changelog-version">'+group.version+'</span>\n\t\t\t\t\t\t\t<span class="slide-changelog-version-installed" title="Installed"><i class="material-icons">check</i></span>\n\t\t\t\t\t\t\t<span class="slide-changelog-version-date"></span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t');if(!group.installed){header.find(".slide-changelog-version-installed").remove()}header.find(".slide-changelog-version-date").text(group.date);changelogContainer.append(header);changelogContainer.append(ul)}}catch(err){_didIteratorError2=true;_iteratorError2=err}finally{try{if(!_iteratorNormalCompletion2&&_iterator2["return"]){_iterator2["return"]()}}finally{if(_didIteratorError2){throw _iteratorError2}}}slideElem.append(changelogContainer)}else if(slide.type=="highlight"){slideElem.addClass("highlight")}if(slide.title){slideElem.find(".slide-title").html(slide.title)}if(slide.description){slideElem.find(".slide-description").html(slide.description)}if(slide.image){slideElem.find(".slide-media").css("background-image","url("+slide.image+")")}this.slideScroll.append(slideElem)}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator["return"]){_iterator["return"]()}}finally{if(_didIteratorError){throw _iteratorError}}}var slides=this.element.find(".slide");slides.width(this.slideHolder.outerWidth());this.index=0;this.updateView();this.element.addClass("animated")}},{key:"updateView",value:function updateView(){this.slideScroll.css("left",-this.slideHolder.outerWidth()*this.index+"px");var slide=this.element.find(".slide").eq(this.index);this.slideHolder.height(slide.height());this.prev.toggle(!!this.options.slides[this.index-1]);this.next.toggle(!!this.options.slides[this.index+1])}}]);return WhatsNewDialog}(Dialog);module.exports=WhatsNewDialog},{"./Dialog":498}]
});