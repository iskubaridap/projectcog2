define([],function(){
	return [function(require,module,exports){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _get=function get(_x2,_x3,_x4){var _again=true;_function:while(_again){var object=_x2,property=_x3,receiver=_x4;_again=false;if(object===null)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined}else{_x2=parent;_x3=property;_x4=receiver;_again=true;desc=parent=undefined;continue _function}}else if("value"in desc){return desc.value}else{var getter=desc.get;if(getter===undefined){return undefined}return getter.call(receiver)}}};function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var OptionsPanel=require("./OptionsPanel");var LookAndFeelOptionsPanel=function(_OptionsPanel){_inherits(LookAndFeelOptionsPanel,_OptionsPanel);function LookAndFeelOptionsPanel(){var options=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];_classCallCheck(this,LookAndFeelOptionsPanel);_get(Object.getPrototypeOf(LookAndFeelOptionsPanel.prototype),"constructor",this).call(this,options);this.id="look-and-feel";this.name="Look & Feel";this.icon="color_lens";this.emptyMessage="No options are available.";app.on("component-dimensions-updated.laftpo",this.componentDimensionsUpdated.bind(this));app.on("\n\t\t\tresource-changed.laftpo\n\t\t\tcontext-css-changed.laftpo\n\t\t\tpackage-inserted.laftpo \n\t\t\tpackage-removed.laftpo",this.cssChanged.bind(this));this.styleTarget=$('<div class="style-target"><span class="select"></span></div>').hide();this.content.before(this.styleTarget)}_createClass(LookAndFeelOptionsPanel,[{key:"destructor",value:function destructor(){app.off(".laftpo")}},{key:"bindEventListeners",value:function bindEventListeners(){_get(Object.getPrototypeOf(LookAndFeelOptionsPanel.prototype),"bindEventListeners",this).call(this);this.styleTarget.off("click").on("click",".select",this.showStyleTargetMenu.bind(this))}},{key:"cssChanged",value:function cssChanged(){if(this.isActive()){this.scheduleUpdate(100)}}},{key:"componentDimensionsUpdated",value:function componentDimensionsUpdated(component){if(component==this.optionItemContainer._options.component&&!app.isInlineEditingActive()&&this.isActive()){this.scheduleUpdate(50)}}},{key:"showStyleTargetMenu",value:function showStyleTargetMenu(){var that=this;var target=this.styleTarget.find(".select");var offset=target.offset();var left=offset.left+target.outerWidth();var top=offset.top+target.outerHeight();var component=this.optionItemContainer._options.component;var options=[];var activeBlock=component.getStyleTarget();var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=component.getMatchingUserCSS()[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var block=_step.value;var resource=app.context.findResourceForCSSBlock(block);options.push({name:block.getPrettyName(),action:function(block){component.setStyleTarget(block);this.update()}.bind(this,block),label:resource?resource.name:"",secondary:block.mediaQuery?"@media "+block.mediaQuery:"",active:block==activeBlock})}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator["return"]){_iterator["return"]()}}finally{if(_didIteratorError){throw _iteratorError}}}options.push({name:"Create CSS Block..",action:function action(){var context=component.context();app.editorPanel.focusEditorAndExpand(context.activeStylesEditor);context.activeStylesEditor.createNewBlock(component.element[0],function(block){if(!block.matchesElement(component.element[0])){return}component.setStyleTarget(block);that.scheduleUpdate()})}});app.contextMenu.show(left,top,options,{toggler:target,gravity:"left",theme:"dark",width:target.outerWidth(),multiline:true})}},{key:"update",value:function update(){this.storeFocusState();_get(Object.getPrototypeOf(LookAndFeelOptionsPanel.prototype),"update",this).call(this);if(!this.optionItemContainer._options.component)return this.element;var selectedStyle=this.optionItemContainer._options.component.getStyleTarget();if(selectedStyle){this.styleTarget.find(".select").text(selectedStyle.getPrettyName())}this.styleTarget.toggle(this.optionItemContainer.hasChildren());this.restoreFocusState();this.restoreScrollPosition();return this.element}}]);return LookAndFeelOptionsPanel}(OptionsPanel);module.exports=LookAndFeelOptionsPanel},{"./OptionsPanel":1232}]
});