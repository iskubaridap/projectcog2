define([],function(){
	return [function(require,module,exports){"use strict";var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var PanelGroup=require("./PanelGroup");var PanelContainer=function(){function PanelContainer(element){_classCallCheck(this,PanelContainer);this.id="";this.collapsed=false;this.reverse=false;this.dimensions={};this.oldDimensions={};this.children=[];this.activeGroup=null;this.element=element;app.on("drag-start",this.dragStart.bind(this));app.on("drag-end",this.dragEnd.bind(this));app.on("resize",this.onAppResize.bind(this));this._updateFunc=function(){if(!app.hasActiveContext()){return}this.update()}.bind(this)}_createClass(PanelContainer,[{key:"initialize",value:function initialize(){this.updateDimensions();if(this.shouldChangeCollapseState(this.dimensions.width)){this.toggleCollapseState()}app.persistPanels()}},{key:"createPanelResizeHandle",value:function createPanelResizeHandle(){return $('<div class="handle vertical resize-panel" data-type="'+(this.reverse?"w":"e")+'"></div>')}},{key:"bindEventListeners",value:function bindEventListeners(){this.element.off(".panel");this.element.on("mousedown.panel",".handle.resize-panel",this.onResizeStart.bind(this))}},{key:"dragStart",value:function dragStart(components){this.children.map(function(c){return c.dragStart(components)})}},{key:"dragEnd",value:function dragEnd(components){this.children.map(function(c){return c.dragEnd(components)})}},{key:"togglePanel",value:function togglePanel(panel){var activate=arguments.length<=1||arguments[1]===undefined?null:arguments[1];var group=panel.parent;group.togglePanel(panel,activate);if(this.isCollapsed()){group.toggle(panel.isSelected())}}},{key:"toggleGroup",value:function toggleGroup(group){var activate=arguments.length<=1||arguments[1]===undefined?null:arguments[1];if(activate===null){activate=!group.isActive()}if(activate){group.activate()}else{group.deactivate()}}},{key:"activateGroup",value:function activateGroup(group){if(this.activeGroup&&this.activeGroup===group)return;this.activeGroup=group}},{key:"deactivateGroup",value:function deactivateGroup(group){this.activeGroup=null}},{key:"findIndexFor",value:function findIndexFor(group){return this.children.indexOf(group)}},{key:"add",value:function add(items){if(!Array.isArray(items)){items=[items]}var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=items[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var item=_step.value;item.parent=this;this.children.push(item)}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator["return"]){_iterator["return"]()}}finally{if(_didIteratorError){throw _iteratorError}}}}},{key:"remove",value:function remove(group){var index=this.findIndexFor(group);if(index==-1)return;this.children.splice(index,1);return group}},{key:"empty",value:function empty(){var _iteratorNormalCompletion2=true;var _didIteratorError2=false;var _iteratorError2=undefined;try{for(var _iterator2=this.children[Symbol.iterator](),_step2;!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=true){var group=_step2.value;if(group.destructor){group.destructor()}}}catch(err){_didIteratorError2=true;_iteratorError2=err}finally{try{if(!_iteratorNormalCompletion2&&_iterator2["return"]){_iterator2["return"]()}}finally{if(_didIteratorError2){throw _iteratorError2}}}this.children=[]}},{key:"isCollapsed",value:function isCollapsed(){return this.collapsed}},{key:"isExpanded",value:function isExpanded(){return!this.isCollapsed()}},{key:"isGroupActive",value:function isGroupActive(child){}},{key:"getGroupDimensions",value:function getGroupDimensions(group){}},{key:"onResizeStart",value:function onResizeStart(e){e.preventDefault();var handle=$(e.target);this.resizeStart(handle.data("type"))}},{key:"onAppResize",value:function onAppResize(){}},{key:"resizeStart",value:function resizeStart(){this.updateDimensionsIfNeeded()}},{key:"onCollapseStateChange",value:function onCollapseStateChange(){this.children.map(function(group){return group.onCollapseStateChange()})}},{key:"shouldChangeCollapseState",value:function shouldChangeCollapseState(size){return size<this.collapseLimit-this.collapseLimitTreshold&&this.isExpanded()||size>this.collapseLimit+this.collapseLimitTreshold&&this.isCollapsed()}},{key:"toggleCollapseState",value:function toggleCollapseState(){var collapse=arguments.length<=0||arguments[0]===undefined?null:arguments[0];if(collapse===null){collapse=!this.collapsed}this.collapsed=collapse;this.onCollapseStateChange();this.update()}},{key:"canChildBeResizedHorizontally",value:function canChildBeResizedHorizontally(child){return false}},{key:"canChildBeResizedVertically",value:function canChildBeResizedVertically(child){return false}},{key:"updateDimensions",value:function updateDimensions(){}},{key:"updateDimensionsIfNeeded",value:function updateDimensionsIfNeeded(){if(!this.dimensions.width){this.updateDimensions()}}},{key:"scheduleUpdate",value:function scheduleUpdate(){var time=arguments.length<=0||arguments[0]===undefined?20:arguments[0];clearTimeout(this._updateTimer);this._updateTimer=setTimeout(this._updateFunc,time)}},{key:"updateCollapsedView",value:function updateCollapsedView(){var _iteratorNormalCompletion3=true;var _didIteratorError3=false;var _iteratorError3=undefined;try{for(var _iterator3=this.children[Symbol.iterator](),_step3;!(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done);_iteratorNormalCompletion3=true){var group=_step3.value;var groupElement=group.updateCollapsed();this.element.append(groupElement);if(group.isActive()){this.element.prepend(group.expandedElement);group.update()}}}catch(err){_didIteratorError3=true;_iteratorError3=err}finally{try{if(!_iteratorNormalCompletion3&&_iterator3["return"]){_iterator3["return"]()}}finally{if(_didIteratorError3){throw _iteratorError3}}}}},{key:"updateExpandedView",value:function updateExpandedView(){var _iteratorNormalCompletion4=true;var _didIteratorError4=false;var _iteratorError4=undefined;try{for(var _iterator4=this.children[Symbol.iterator](),_step4;!(_iteratorNormalCompletion4=(_step4=_iterator4.next()).done);_iteratorNormalCompletion4=true){var group=_step4.value;this.element.append(group.expandedElement);group.update()}}catch(err){_didIteratorError4=true;_iteratorError4=err}finally{try{if(!_iteratorNormalCompletion4&&_iterator4["return"]){_iterator4["return"]()}}finally{if(_didIteratorError4){throw _iteratorError4}}}}},{key:"updateSize",value:function updateSize(){}},{key:"update",value:function update(){this.element.empty();this.element.attr("id",this.id);this.element.append(this.createPanelResizeHandle());if(this.isCollapsed()){this.updateCollapsedView()}else{this.updateExpandedView()}this.updateSize();this.element.toggleClass("collapsed",this.isCollapsed());this.bindEventListeners();return this.element}},{key:"unserialize",value:function unserialize(obj){var _this=this;this.id=obj.id;this.collapsed=obj.collapsed;this.reverse=obj.reverse;this.dimensions=_extends({},obj.dimensions);obj.children.forEach(function(child){var group=new(app.getPanelConstructor(child["class"]));_this.add(group);group.unserialize(child)})}},{key:"serialize",value:function serialize(){return{id:this.id,class:this.constructor.name,collapsed:this.collapsed,reverse:this.reverse,dimensions:this.dimensions,children:this.children.map(function(child){return child.serialize()})}}},{key:"length",get:function get(){return this.children.length}}]);return PanelContainer}();module.exports=PanelContainer},{"./PanelGroup":1236}]
});