define([],function(){
	return [function(require,module,exports){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _get=function get(_x3,_x4,_x5){var _again=true;_function:while(_again){var object=_x3,property=_x4,receiver=_x5;_again=false;if(object===null)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined}else{_x3=parent;_x4=property;_x5=receiver;_again=true;desc=parent=undefined;continue _function}}else if("value"in desc){return desc.value}else{var getter=desc.get;if(getter===undefined){return undefined}return getter.call(receiver)}}};function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var Dialog=require("./Dialog");var PageSelectionDialog=function(_Dialog){_inherits(PageSelectionDialog,_Dialog);function PageSelectionDialog(elem){_classCallCheck(this,PageSelectionDialog);_get(Object.getPrototypeOf(PageSelectionDialog.prototype),"constructor",this).call(this,elem);this.pages=[];this.pageWrapper=elem.find(".pages");this.pageList=this.pageWrapper.find("ul");this.pageCount=this.pageWrapper.find(".title .count");this.pageList.on("click",".card",this.clickPage.bind(this));this.pageList.on("change",".addon input[type=checkbox]",this.addPageToNavigation.bind(this))}_createClass(PageSelectionDialog,[{key:"setPages",value:function setPages(pages){this.pages=pages;this.prevPages=$.extend(true,[],this.pages)}},{key:"clickPage",value:function clickPage(e){if($(e.target).closest(".addon").length){this.addPageToNavigation(e);return}var target=$(e.currentTarget);var page=target.closest("li").data("page");this.togglePageSelection(page);this.update()}},{key:"addPageToNavigation",value:function addPageToNavigation(e){e.stopImmediatePropagation();var target=$(e.currentTarget);var page=target.closest("li").data("page");this.togglePageActivation(page);this.update()}},{key:"buildPages",value:function buildPages(){this.pageList.empty();var perRow=3;for(var i=0;i<this.pages.length;i++){var page=this.pages[i];var isSelected=this.isPageSelected(page);var row=Math.floor(i/perRow);var shouldAnimateShow=isSelected&&!this.isPageSelected(page,this.prevPages);var shouldAnimateHide=!isSelected&&this.isPageSelected(page,this.prevPages);var li=$("<li>");li.data("page",page);li.toggleClass("active",isSelected);li.toggleClass("animate-show",shouldAnimateShow);li.toggleClass("animate-hide",shouldAnimateHide);var card=$("<div>");card.addClass("card");li.append(card);var span=$("<span>");span.addClass("img");card.append(span);var overlay=$("<span>");overlay.addClass("overlay");span.append(overlay);var checkmark=$("<span>");checkmark.addClass("checkmark");card.append(checkmark);var img=$("<div>");img.addClass("background");img.attr("draggable",false);img.css("background-image","url("+this.folder+page.id+".jpg)");span.append(img);var p=$("<p>");p.text(page.name);card.append(p);if(this.pages.length>1){var addon=$("<label>");addon.addClass("addon");addon.html("<span>Add to navigation</span>");var checkbox=$("<b>");checkbox.addClass("pretty-checkbox light");var input=$("<input>");input.attr("type","checkbox");if(page.navbar){input.prop("checked",true)}checkbox.append(input);checkbox.append("<i></i>");addon.append(checkbox);span.append(addon)}this.pageList.append(li)}this.pageCount.text("("+this.getSelectedPages().length+"/"+this.pages.length+")");this.prevPages=$.extend(true,[],this.pages)}},{key:"togglePageSelection",value:function togglePageSelection(page){var selected=arguments.length<=1||arguments[1]===undefined?null:arguments[1];if(selected===null){selected=!page.selected}page.selected=selected}},{key:"togglePageActivation",value:function togglePageActivation(page){var navbar=arguments.length<=1||arguments[1]===undefined?null:arguments[1];if(navbar===null){navbar=!page.navbar}page.navbar=navbar}},{key:"isPageSelected",value:function isPageSelected(page,pages){if(!pages){pages=this.pages}var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=pages[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var p=_step.value;if(p.path===page.path&&p.selected){return true}}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator["return"]){_iterator["return"]()}}finally{if(_didIteratorError){throw _iteratorError}}}return false}},{key:"getSelectedPages",value:function getSelectedPages(){var _this=this;if(!this.pages)return[];return this.pages.filter(function(p){return _this.isPageSelected(p)})}},{key:"getSelectedPagePaths",value:function getSelectedPagePaths(){return this.getSelectedPages().map(function(p){return p.path})}},{key:"getNavbarPages",value:function getNavbarPages(){var _this2=this;if(!this.pages)return[];return this.pages.filter(function(p){return _this2.isPageInNavbar(p)})}},{key:"getNavbarPagePaths",value:function getNavbarPagePaths(){return this.getNavbarPages().map(function(p){return p.path})}},{key:"isPageInNavbar",value:function isPageInNavbar(page){var _iteratorNormalCompletion2=true;var _didIteratorError2=false;var _iteratorError2=undefined;try{for(var _iterator2=this.pages[Symbol.iterator](),_step2;!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=true){var p=_step2.value;if(p.path===page.path&&p.selected&&p.navbar){return true}}}catch(err){_didIteratorError2=true;_iteratorError2=err}finally{try{if(!_iteratorNormalCompletion2&&_iterator2["return"]){_iterator2["return"]()}}finally{if(_didIteratorError2){throw _iteratorError2}}}return false}},{key:"sortPages",value:function sortPages(){this.pages.sort(function(a,b){return b.selected-a.selected||(a.selected&&b.selected?b.navbar-a.navbar:0)||a.name.toLowerCase().localeCompare(b.name.toLowerCase())})}}]);return PageSelectionDialog}(Dialog);module.exports=PageSelectionDialog},{"./Dialog":498}]
});