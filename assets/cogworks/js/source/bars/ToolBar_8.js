define([],function(){
	return [function(require,module,exports){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _get=function get(_x,_x2,_x3){var _again=true;_function:while(_again){var object=_x,property=_x2,receiver=_x3;_again=false;if(object===null)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined}else{_x=parent;_x2=property;_x3=receiver;_again=true;desc=parent=undefined;continue _function}}else if("value"in desc){return desc.value}else{var getter=desc.get;if(getter===undefined){return undefined}return getter.call(receiver)}}};function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var Bar=require("./Bar");var ToolBar=function(_Bar){_inherits(ToolBar,_Bar);function ToolBar(elem){_classCallCheck(this,ToolBar);_get(Object.getPrototypeOf(ToolBar.prototype),"constructor",this).call(this);this.element=elem;elem.on("click",".button-size",this.clickResize.bind(this));elem.on("click",".button-zoom",this.clickZoom.bind(this));elem.on("click",".rotate-canvas",this.clickRotate.bind(this));elem.on("click",".toggle-grid",this.toggleGrid.bind(this));elem.on("click",".toggle-highlight",this.toggleHighlight.bind(this));elem.on("click",".page-selection",this.clickPageSelection.bind(this));elem.on("click",".canvas-settings",this.clickCanvasSettings.bind(this));elem.on("click",".device-selection",this.clickDeviceSelection.bind(this));this.zoomInElement=elem.find(".zoom-in");this.zoomOutElement=elem.find(".zoom-out");this.rotateCanvas=elem.find(".rotate-canvas");this.buttonSizes=elem.find(".button-size");this.info=elem.find(".info");this.pageSelection=elem.find(".page-selection");this.deviceSelection=elem.find(".device-selection");this.deviceSizes=this.element.find(".devices");app.on("context-activated canvas-resized canvas-zoomed page-activated",this.update.bind(this));app.on("resource-changed",function(type,action){if(type=="page"&&action=="edit"){this.update()}}.bind(this))}_createClass(ToolBar,[{key:"toggleGrid",value:function toggleGrid(e){app.toggleUISetting("visualizeGrid");app.canvas.schedulePartialUpdate({ui:true});this.update()}},{key:"toggleHighlight",value:function toggleHighlight(e){app.toggleUISetting("visualizeElementBoxes");this.update()}},{key:"clickPageSelection",value:function clickPageSelection(e){var target=$(e.target.closest(".page-selection"));var options=[];var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=app.context.pages.getAll()[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var page=_step.value;options.push({name:app.context.pages.getRelativePathForItem(page),action:pageClick.bind(this,page),disabled:page.isActive()})}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator["return"]){_iterator["return"]()}}finally{if(_didIteratorError){throw _iteratorError}}}options.push({type:"divider"});options.push({name:"New Page",action:function action(){var page=app.getPanel("design").createNewPage();app.activatePage(page)}});if(app.context.usesTemplate()){options.push({name:"New Template Page",action:function action(){app.getPanel("design").createNewPageFromTemplate()}})}var rect=target[0].getBoundingClientRect();app.contextMenu.show(rect.right,rect.bottom-6,options,{toggler:target,gravity:"left"});function pageClick(page){app.activatePage(page)}}},{key:"clickDeviceSelection",value:function clickDeviceSelection(e){var target=$(e.target.closest(".device-selection"));var options=[];var _iteratorNormalCompletion2=true;var _didIteratorError2=false;var _iteratorError2=undefined;try{for(var _iterator2=app.canvas.getDevices()[Symbol.iterator](),_step2;!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=true){var device=_step2.value;options.push({name:device.name,action:deviceClick.bind(this,device),selected:function selected(name){return app.context.isDeviceSelected(name)},secondary:device.width+" x "+device.height})}}catch(err){_didIteratorError2=true;_iteratorError2=err}finally{try{if(!_iteratorNormalCompletion2&&_iterator2["return"]){_iterator2["return"]()}}finally{if(_didIteratorError2){throw _iteratorError2}}}var rect=target[0].getBoundingClientRect();app.contextMenu.show(rect.left,rect.bottom-6,options,{toggler:target,gravity:"right"});function deviceClick(device){app.context.selectDevice(device);return false}}},{key:"clickCanvasSettings",value:function clickCanvasSettings(e){var _this=this;var target=$(e.target.closest(".canvas-settings"));var options=[{name:"Show BS Grid",icon:"grid_on",title:"Show outlines of Bootstrap rows and columns.",action:function action(e){_this.toggleGrid(e);return false},checkbox:true,checkboxChecked:app.getUISetting("visualizeGrid")},{name:"Show Box Model",icon:"settings_overscan",title:"Show margins and paddings when hovering over components.",action:function action(e){_this.toggleHighlight(e);return false},checkbox:true,checkboxChecked:app.getUISetting("visualizeElementBoxes")}];var rect=target.find("i")[0].getBoundingClientRect();app.contextMenu.show(rect.left,rect.bottom,options,{toggler:target})}},{key:"clickResize",value:function clickResize(e){if(blockFor(200))return;var width=app.framework.getSizeForBreakpoint(e.currentTarget.dataset.id);setTimeout(function(){app.canvas.resize({width:width},{animation:true})},20);this.element.find(".button-size").removeClass("active");$(e.currentTarget).addClass("active")}},{key:"clickZoom",value:function clickZoom(e){if(e.currentTarget.dataset.id=="zoom-in"){app.canvas.zoomIn()}else{app.canvas.zoomOut()}this.update()}},{key:"clickRotate",value:function clickRotate(){app.context.switchOrientation()}},{key:"update",value:function update(){this.show();this.deviceSizes.empty();var _iteratorNormalCompletion3=true;var _didIteratorError3=false;var _iteratorError3=undefined;try{for(var _iterator3=app.framework.getDeviceIcons()[Symbol.iterator](),_step3;!(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done);_iteratorNormalCompletion3=true){var device=_step3.value;this.deviceSizes.append('<span class="button-size '+device.name+'" data-id="'+device.name+'" title="'+device.name.toUpperCase()+'">'+'<i class="material-icons">'+device.icon+"</i>"+"</span>")}}catch(err){_didIteratorError3=true;_iteratorError3=err}finally{try{if(!_iteratorNormalCompletion3&&_iterator3["return"]){_iterator3["return"]()}}finally{if(_didIteratorError3){throw _iteratorError3}}}this.zoomInElement.toggleClass("active",app.context.canvasDimensions.zoom<2);this.zoomOutElement.toggleClass("active",app.context.canvasDimensions.zoom>.25);this.pageSelection.text(app.context.page.name);var buttonSizes=this.element.find(".button-size");buttonSizes.removeClass("active");buttonSizes.filter("."+app.canvas.getBreakpoint()).addClass("active");this.info.text(Math.floor(app.context.canvasDimensions.width)+"px x "+Math.floor(app.context.canvasDimensions.height)+"px @ "+Math.round(app.context.canvasDimensions.zoom*100)+"%")}}]);return ToolBar}(Bar);var blocked=false;function blockFor(n){if(blocked){return true}blocked=true;setTimeout(function(){blocked=false},n);return false}module.exports=ToolBar},{"./Bar":1}]
});