define([],function(){
	return [function(require,module,exports){"use strict";module.exports=function(options){var app=options.app;var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=options.tabAreas[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var area=_step.value;area.on("mousedown",".tab",mouseDown);area.on("wheel",mouseWheel)}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator["return"]){_iterator["return"]()}}finally{if(_didIteratorError){throw _iteratorError}}}var hasMultipleAreas=options.tabAreas.length>1,currentTabArea="";app.on("mouseup",mouseUp);app.on("mousemove",mouseMove);app.on("resize panel-resize",resetScroll);var mouseIsDown,mouseDownPosition,mouseMoveStartPosition,mouseDownNodeLeft,tabBarRightOffset,mouseDownNode,offsetLeft,offsetRight,tabBarLeftOffset,previousSnapPoint,nextSnapPoint,mouseMoved;function mouseDown(e){e.preventDefault();mouseIsDown=true;mouseDownPosition=app.mousePosition.clone();mouseMoveStartPosition=app.mousePosition.clone();mouseDownNode=e.currentTarget;mouseDownNodeLeft=mouseDownNode.getBoundingClientRect().left;if(hasMultipleAreas){if($(mouseDownNode).closest(options.tabAreas[0]).length){currentTabArea="left"}else currentTabArea="right"}offsetLeft=e.pageX-mouseDownNodeLeft;offsetRight=mouseDownNode.getBoundingClientRect().right-e.pageX;var rect=e.currentTarget.parentNode.parentNode.getBoundingClientRect();tabBarLeftOffset=rect.left;tabBarRightOffset=rect.right;detectNeighborsForDraggedTab();if(options.startDrag){options.startDrag()}}function mouseUp(e){if(!mouseIsDown){return}e.preventDefault();mouseIsDown=false;if(mouseMoved){mouseMoved=false;mouseDownNode.classList.remove("dragged");mouseDownNode.style["transform"]="";options.onChange({tab:mouseDownNode})}else{options.onClick(e)}mouseDownNode=null;previousSnapPoint=null;nextSnapPoint=null;if(options.endDrag){options.endDrag()}}function mouseMove(){if(!mouseIsDown)return;if(mouseDownPosition.distanceTo(app.mousePosition)>3){var movingLeft=false,movingRight=false;if(app.mousePosition.x>mouseMoveStartPosition.x){movingRight=true}else if(app.mousePosition.x<mouseMoveStartPosition.x){movingLeft=true}if(app.mousePosition.x-offsetLeft<=tabBarLeftOffset){if(app.mousePosition.x-offsetLeft<=tabBarLeftOffset-15&&hasMultipleAreas&&movingLeft&&currentTabArea=="right"){moveToLeftArea();detectNeighborsForDraggedTab();mouseMoveStartPosition=app.mousePosition.clone()}return}if(app.mousePosition.x+offsetRight>=tabBarRightOffset){if(app.mousePosition.x+offsetRight>=tabBarRightOffset+15&&hasMultipleAreas&&movingRight&&currentTabArea=="left"){moveToRightArea();detectNeighborsForDraggedTab();mouseMoveStartPosition=app.mousePosition.clone()}return}mouseMoved=true;mouseDownNode.classList.add("dragged");if(movingLeft&&previousSnapPoint&&app.mousePosition.x<previousSnapPoint-10){var element=mouseDownNode.previousElementSibling;element.insertAdjacentElement("beforeBegin",mouseDownNode);mouseDownNodeLeft-=element.offsetWidth;detectNeighborsForDraggedTab();mouseMoveStartPosition=app.mousePosition.clone()}else if(movingRight&&nextSnapPoint&&app.mousePosition.x>nextSnapPoint+10){var element=mouseDownNode.nextElementSibling;element.insertAdjacentElement("afterEnd",mouseDownNode);mouseDownNodeLeft+=element.offsetWidth;detectNeighborsForDraggedTab();mouseMoveStartPosition=app.mousePosition.clone()}mouseDownNode.style["transform"]="translateX("+(app.mousePosition.x-(mouseDownNodeLeft+offsetLeft))+"px)"}}function moveToLeftArea(){var scroll=options.tabAreas[0].find(".tab-scroll");var rect=scroll[0].getBoundingClientRect();tabBarLeftOffset=rect.left;tabBarRightOffset=rect.right;currentTabArea="left";scroll.find(".tab-holder").append(mouseDownNode);var spaceFromLeft=0;mouseDownNodeLeft=rect.left;if(mouseDownNode.previousElementSibling){mouseDownNodeLeft=mouseDownNode.previousElementSibling.getBoundingClientRect().right;spaceFromLeft=mouseDownNodeLeft-rect.left}var node=mouseDownNode;node.classList.add("no-animation");node.style["transform"]="translateX("+(rect.width-mouseDownNode.offsetWidth-spaceFromLeft)+"px)";setTimeout(function(){node.classList.remove("no-animation")},50);mouseMoved=true}function moveToRightArea(){var scroll=options.tabAreas[1].find(".tab-scroll");var rect=scroll[0].getBoundingClientRect();tabBarLeftOffset=rect.left;tabBarRightOffset=rect.right;currentTabArea="right";scroll.find(".tab-holder").prepend(mouseDownNode);mouseDownNodeLeft=rect.left;var node=mouseDownNode;node.classList.add("no-animation");node.style["transform"]="translateX(0px)";setTimeout(function(){node.classList.remove("no-animation")},50);mouseMoved=true}function detectNeighborsForDraggedTab(){var prev=mouseDownNode.previousElementSibling;var next=mouseDownNode.nextElementSibling;previousSnapPoint=null;nextSnapPoint=null;if(prev){previousSnapPoint=prev.getBoundingClientRect().right}if(next){nextSnapPoint=next.getBoundingClientRect().left}}function mouseWheel(e){if(mouseMoved){return}var tabScroll=e.currentTarget.firstElementChild,tabHolder=tabScroll.firstElementChild;var tabScrollOuterWidth=tabScroll.getBoundingClientRect().width;var tabHolderOuterWidth=tabHolder.getBoundingClientRect().width;var scrollOffset=tabHolder.scrollOffset||0;if(e.originalEvent.deltaX>0||e.originalEvent.deltaY>0){scrollOffset-=50}else{scrollOffset+=50}if(scrollOffset>0){scrollOffset=0}if(tabScrollOuterWidth>tabHolderOuterWidth){scrollOffset=0}else if(-scrollOffset+tabScrollOuterWidth>tabHolderOuterWidth){scrollOffset=tabScrollOuterWidth-tabHolderOuterWidth}tabHolder.style.transform="translateX("+scrollOffset+"px)";tabHolder.scrollOffset=scrollOffset}function resetScroll(){var _iteratorNormalCompletion2=true;var _didIteratorError2=false;var _iteratorError2=undefined;try{for(var _iterator2=options.tabAreas[Symbol.iterator](),_step2;!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=true){var area=_step2.value;var tabScroll=area[0].firstElementChild,tabHolder=tabScroll.firstElementChild;var tabScrollOuterWidth=tabScroll.getBoundingClientRect().width;var tabHolderOuterWidth=tabHolder.getBoundingClientRect().width;if(tabScrollOuterWidth>=tabHolderOuterWidth){tabHolder.scrollOffset=0;tabHolder.style.transform=""}else if(-tabHolder.scrollOffset+tabScrollOuterWidth>tabHolderOuterWidth){tabHolder.scrollOffset=tabScrollOuterWidth-tabHolderOuterWidth;tabHolder.style.transform="translateX("+tabHolder.scrollOffset+"px)"}}}catch(err){_didIteratorError2=true;_iteratorError2=err}finally{try{if(!_iteratorNormalCompletion2&&_iterator2["return"]){_iterator2["return"]()}}finally{if(_didIteratorError2){throw _iteratorError2}}}}}},{}]
});