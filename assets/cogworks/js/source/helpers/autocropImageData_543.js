define([],function(){
	return [function(require,module,exports){"use strict";module.exports=function autocropImageData(obj,cb){var myImage=new window.Image;myImage.onload=function(){cb(removeImageBlanks(myImage,{width:obj.newWidth,height:obj.newHeight}))};myImage.src=obj.data};function removeImageBlanks(imageObject){var resize=arguments.length<=1||arguments[1]===undefined?null:arguments[1];var imgWidth=imageObject.naturalWidth;var imgHeight=imageObject.naturalHeight;var canvas=document.createElement("canvas");canvas.setAttribute("width",imgWidth);canvas.setAttribute("height",imgHeight);var context=canvas.getContext("2d");context.drawImage(imageObject,0,0);var obj={red:0,green:0,blue:0,opacity:0};var imageData=context.getImageData(0,0,imgWidth,imgHeight),data=imageData.data,getRBG=function getRBG(x,y){var offset=imgWidth*y+x;obj.red=data[offset*4];obj.green=data[offset*4+1];obj.blue=data[offset*4+2];obj.opacity=data[offset*4+3];return obj},isWhite=function isWhite(rgb){return rgb.red>250&&rgb.green>250&&rgb.blue>250},scanY=function scanY(fromTop){var offset=fromTop?1:-1;for(var y=fromTop?0:imgHeight-1;fromTop?y<imgHeight:y>-1;y+=offset){for(var x=0;x<imgWidth;x++){var rgb=getRBG(x,y);if(!isWhite(rgb)){return y}}}return false},scanX=function scanX(fromLeft){var offset=fromLeft?1:-1;for(var x=fromLeft?0:imgWidth-1;fromLeft?x<imgWidth:x>-1;x+=offset){for(var y=0;y<imgHeight;y++){var rgb=getRBG(x,y);if(!isWhite(rgb)){return x}}}return false};var cropTop=scanY(true),cropBottom=scanY(false),cropLeft=scanX(true),cropRight=scanX(false);if(cropTop===false||cropBottom===false||cropLeft===false||cropRight===false){return false}var cropWidth=cropRight-cropLeft+1;var cropHeight=cropBottom-cropTop+1;if(cropWidth<8||cropHeight<8){return false}var ratio=1;if(resize&&(cropWidth>resize.width||cropHeight>resize.height)){if(cropWidth>cropHeight){ratio=resize.width/cropWidth}else{ratio=resize.height/cropHeight}}canvas.setAttribute("width",Math.round(ratio*cropWidth));canvas.setAttribute("height",Math.round(ratio*cropHeight));canvas.getContext("2d").drawImage(imageObject,cropLeft,cropTop,cropWidth,cropHeight,0,0,Math.round(ratio*cropWidth),Math.round(ratio*cropHeight));return canvas.toDataURL("image/jpeg")}},{}]
});