define([],function(){
	return [function(require,module,exports){"use strict";var selfClosingElements=new Set(["AREA","BASE","BASEFONT","BR","COL","HR","IMG","INPUT","LINK","META","PARAM"]);module.exports=function parseDOMTree(node,page,options){return walk(node,page,options)};function walk(node,page){var options=arguments.length<=2||arguments[2]===undefined?{}:arguments[2];if(node["bs-tag-override"]){return{tag:node["bs-tag-override"].tag,element:node,attributes:node["bs-tag-override"].attributes,selfclosing:selfClosingElements.has(node["bs-tag-override"].tag.toUpperCase()),children:[]}}var attr=node.attributes;if(attr["bs-system-element"]&&options.removeSystemElements){return null}if(attr["bs-hidden"]){return null}var component=page.domToComponent.get(node);var item={tag:node.nodeName.toLowerCase(),element:node,attributes:[],selfclosing:selfClosingElements.has(node.nodeName),children:[]};for(var i=0;i<attr.length;i++){if(attr[i].name=="bs-system-element"&&options.unmarkSystemElements){continue}var tmp={name:attr[i].name,value:null};if(attr[i].value){if(node["bs-"+attr[i].name+"-override"]){tmp.value=node["bs-"+attr[i].name+"-override"];item.attributes.push(tmp);continue}if(component&&attr[i].name in component.attributesMask){if(component.attributesMask[attr[i].name]===null){continue}tmp.value=component.attributesMask[attr[i].name]}else{tmp.value=attr[i].value}}item.attributes.push(tmp)}if(node.childNodes&&node.childNodes.length){var tmpString="";var whitespace=/^\s*$/;for(var i=0;i<node.childNodes.length;i++){if(node.childNodes[i].nodeType==3){if(!whitespace.test(node.childNodes[i].textContent)){item.children.push({text:node.childNodes[i].textContent})}continue}if(node.childNodes[i].nodeType!=1)continue;if(tmpString){item.children.push({text:tmpString});tmpString=""}var result=walk(node.childNodes[i],page,options);if(result)item.children.push(result)}}return item}},{}]
});